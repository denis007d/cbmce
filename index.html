<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Roadmap de Estudos CBMCE - Moderno</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        // Paleta Principal (Consistente com a anterior)
                        'primary': { DEFAULT: '#D92329', 'dark': '#B31B20', 'text': '#FFFFFF' }, // Vermelho CBMCE
                        'secondary': { DEFAULT: '#F37021', 'dark': '#D45D17', 'text': '#FFFFFF' }, // Laranja CBMCE
    
                        // Fundos
                        'background': { light: '#F8F9FA', dark: '#111827' }, // Mais suave que o anterior 'light', mais escuro para dark
                        'surface': { light: '#FFFFFF', dark: '#1F2937' }, // Para cards, sidebar
    
                        // Textos
                        'text-primary': { light: '#212529', dark: '#F3F4F6' },
                        'text-secondary': { light: '#6C757D', dark: '#9CA3AF' },
                        'text-accent': { light: '#007F42', dark: '#10B981' }, // Para progresso, destaques
    
                        // Bordas
                        'border-color': { light: '#E5E7EB', dark: '#374151' },
    
                        // Cores de Feedback (podem ser as primárias/secundárias ou específicas)
                        'success': { DEFAULT: '#007F42', 'text': '#FFFFFF', 'light': '#E6F2ED', 'dark': '#05301a' },
                        'warning': { DEFAULT: '#FFC107', 'text': '#212529', 'light': '#FFF8E1', 'dark': '#4d3802' },
                        'danger': { DEFAULT: '#C62828', 'text': '#FFFFFF', 'light': '#FCE8E8', 'dark': '#4a0e0e' },
                        'info': { DEFAULT: '#4E5D6C', 'text': '#FFFFFF', 'light': '#EFF3F6', 'dark': '#2a343f' },
    
                        // Cores específicas para o progresso circular
                        'progress-track': { light: '#E5E7EB', dark: '#374151' },
                        'progress-fill': { light: '#D92329', dark: '#E63940' }, // Cor primária para o preenchimento
                    },
                    fontFamily: {
                        sans: ['Segoe UI', 'Roboto', 'Helvetica Neue', 'Arial', 'sans-serif'], // Fontes modernas
                    },
                    boxShadow: {
                        'custom-light': '0 4px 6px -1px rgba(0, 0, 0, 0.07), 0 2px 4px -1px rgba(0, 0, 0, 0.04)',
                        'custom-dark': '0 4px 6px -1px rgba(0, 0, 0, 0.15), 0 2px 4px -1px rgba(0, 0, 0, 0.1)',
                    }
                }
            },
        }
    </script>
    <style>
        /* Estilo para a barra de rolagem (opcional) */
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #D1D5DB; border-radius: 4px; }
        .dark ::-webkit-scrollbar-thumb { background: #4B5563; }
        ::-webkit-scrollbar-thumb:hover { background: #9CA3AF; }
        .dark ::-webkit-scrollbar-thumb:hover { background: #6B7280; }

        /* Para o progresso circular */
        .progress-ring__circle--animated {
            transition: stroke-dashoffset 0.5s ease-out;
        }
        /* Ajuste para ícones SVG dentro de botões */
        button svg {
            pointer-events: none;
        }
    </style>
</head>
<body class="bg-background-light dark:bg-background-dark text-text-primary-light dark:text-text-primary-dark font-sans transition-colors duration-300">

    <div class="flex min-h-screen">
        <aside class="w-72 bg-surface-light dark:bg-surface-dark p-6 shadow-custom-light dark:shadow-custom-dark flex flex-col space-y-8 fixed top-0 left-0 h-full z-10 overflow-y-auto">
            <div class="flex items-center gap-3 mb-4">
                <img src="https://www.bombeiros.ce.gov.br/wp-content/uploads/sites/27/2021/02/emblema-cbmce-2019-1.png" alt="Brasão CBMCE" class="h-10">
                <div>
                    <h1 class="text-lg font-bold text-primary-DEFAULT dark:text-primary-DEFAULT">Roadmap CBMCE</h1>
                    <p class="text-xs text-text-secondary-light dark:text-text-secondary-dark">Seu Guia de Estudos</p>
                </div>
            </div>

            <div class="border-t border-border-color-light dark:border-border-color-dark pt-6">
                <h2 class="text-sm font-semibold mb-3 text-text-secondary-light dark:text-text-secondary-dark uppercase tracking-wider">Foco Total</h2>
                <div class="text-4xl font-mono text-center my-3 text-secondary-DEFAULT dark:text-secondary-DEFAULT" id="timer">00:00</div>
                <div class="grid grid-cols-2 gap-2 text-xs">
                    <button class="col-span-2 bg-success-DEFAULT text-success-text hover:bg-opacity-80 dark:hover:bg-opacity-80 px-3 py-2 rounded-md transition" id="startTimer">Estudar (25min)</button>
                    <button class="bg-info-DEFAULT text-info-text hover:bg-opacity-80 dark:hover:bg-opacity-80 px-3 py-1.5 rounded-md transition" id="shortBreakTimer">Pausa (5min)</button>
                    <button class="bg-info-DEFAULT text-info-text hover:bg-opacity-80 dark:hover:bg-opacity-80 px-3 py-1.5 rounded-md transition" id="longBreakTimer">Descanso (15min)</button>
                    <button class="bg-secondary-DEFAULT text-secondary-text hover:bg-opacity-80 dark:hover:bg-opacity-80 px-3 py-1.5 rounded-md transition disabled:opacity-50" id="pauseTimer" disabled>Pausar</button>
                    <button class="bg-danger-DEFAULT text-danger-text hover:bg-opacity-80 dark:hover:bg-opacity-80 px-3 py-1.5 rounded-md transition" id="resetTimer">Resetar</button>
                </div>
            </div>

            <div class="border-t border-border-color-light dark:border-border-color-dark pt-6">
                <h2 class="text-sm font-semibold mb-3 text-text-secondary-light dark:text-text-secondary-dark uppercase tracking-wider">Filtrar Conteúdo</h2>
                <input type="text" id="searchInput" placeholder="Buscar tópicos..." class="w-full px-3 py-2 mb-4 rounded-md border border-border-color-light dark:border-border-color-dark bg-background-light dark:bg-background-dark focus:outline-none focus:ring-2 focus:ring-primary-DEFAULT text-sm">
                <div class="space-y-1 text-sm">
                    <button class="filter-tab w-full text-left bg-primary-DEFAULT text-primary-text dark:bg-primary-DEFAULT dark:text-primary-text px-3 py-1.5 rounded-md font-medium transition" data-filter="all">Todos os Tópicos</button>
                    <button class="filter-tab w-full text-left hover:bg-primary-light/30 dark:hover:bg-primary-dark/30 px-3 py-1.5 rounded-md transition" data-filter="pending">Pendentes</button>
                    <button class="filter-tab w-full text-left hover:bg-primary-light/30 dark:hover:bg-primary-dark/30 px-3 py-1.5 rounded-md transition" data-filter="completed">Concluídos</button>
                    <hr class="my-2 border-border-color-light dark:border-border-color-dark">
                    <button class="filter-tab w-full text-left hover:bg-primary-light/30 dark:hover:bg-primary-dark/30 px-3 py-1.5 rounded-md transition" data-filter="module-1">Módulo I</button>
                    <button class="filter-tab w-full text-left hover:bg-primary-light/30 dark:hover:bg-primary-dark/30 px-3 py-1.5 rounded-md transition" data-filter="module-2">Módulo II</button>
                    </div>
            </div>

            <div class="mt-auto pt-6 border-t border-border-color-light dark:border-border-color-dark">
                 <button id="theme-toggle" type="button" class="w-full flex items-center justify-center text-text-secondary-light dark:text-text-secondary-dark hover:bg-border-color-light dark:hover:bg-border-color-dark focus:outline-none rounded-lg text-sm p-2.5">
                    <svg id="theme-toggle-light-icon" class="hidden w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20"><path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm-.707 12.021a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414l-.707.707zM1 11a1 1 0 100-2H0a1 1 0 100 2h1z" fill-rule="evenodd" clip-rule="evenodd"></path></svg>
                    <svg id="theme-toggle-dark-icon" class="hidden w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg>
                    <span id="theme-toggle-text">Alternar Tema</span>
                </button>
            </div>
        </aside>

        <main class="flex-1 ml-72 p-8 overflow-y-auto">
            <header class="mb-8">
                <h2 class="text-2xl font-semibold text-text-primary-light dark:text-text-primary-dark">Painel de Estudos</h2>
            </header>

            <div class="bg-surface-light dark:bg-surface-dark rounded-xl shadow-custom-light dark:shadow-custom-dark p-6 mb-8 flex items-center gap-6">
                <div class="relative" id="progressCircularContainer">
                    <svg class="w-32 h-32 transform -rotate-90" viewBox="0 0 120 120">
                        <circle class="progress-ring__circle--bg stroke-current text-progress-track-light dark:text-progress-track-dark"
                                stroke-width="10" fill="transparent" r="52" cx="60" cy="60" />
                        <circle class="progress-ring__circle--fg stroke-current text-progress-fill-light dark:text-progress-fill-dark progress-ring__circle--animated"
                                stroke-width="10" stroke-linecap="round" fill="transparent" r="52" cx="60" cy="60"
                                id="progressCircleFill" />
                    </svg>
                    <div class="absolute inset-0 flex flex-col items-center justify-center">
                        <span class="text-2xl font-bold text-text-accent-light dark:text-text-accent-dark" id="progressPercentageText">0%</span>
                    </div>
                </div>
                <div>
                    <h3 class="text-xl font-semibold mb-1 text-text-primary-light dark:text-text-primary-dark">Seu Progresso Geral</h3>
                    <p class="text-sm text-text-secondary-light dark:text-text-secondary-dark mb-3">Continue focado para alcançar seus objetivos!</p>
                    <div class="flex gap-6 text-sm">
                        <div>
                            <span class="font-bold text-lg text-text-primary-light dark:text-text-primary-dark" id="completedTopics">0</span>
                            <span class="text-text-secondary-light dark:text-text-secondary-dark"> Concluídos</span>
                        </div>
                        <div>
                            <span class="font-bold text-lg text-text-primary-light dark:text-text-primary-dark" id="totalTopics">0</span>
                            <span class="text-text-secondary-light dark:text-text-secondary-dark"> Totais</span>
                        </div>
                    </div>
                </div>
            </div>

            <div id="modulesContainer" class="space-y-6">
                </div>

            <footer class="text-center mt-12 py-6 border-t border-border-color-light dark:border-border-color-dark">
                <p class="text-xs text-text-secondary-light dark:text-text-secondary-dark">&copy; <span id="currentYear"></span> Roadmap de Estudos CBMCE. Modernizado para você!</p>
            </footer>
        </main>
    </div>

    <script src="main.js"></script>
    <script>
        // JS para o ano atual no footer
        document.getElementById('currentYear').textContent = new Date().getFullYear();

        // --- JS para o Progresso Circular ---
        const progressCircleFill = document.getElementById('progressCircleFill');
        const progressPercentageText = document.getElementById('progressPercentageText');
        const radius = progressCircleFill.r.baseVal.value;
        const circumference = 2 * Math.PI * radius;
        progressCircleFill.style.strokeDasharray = `${circumference} ${circumference}`;
        progressCircleFill.style.strokeDashoffset = circumference;

        function setProgress(percent) {
            const offset = circumference - (percent / 100) * circumference;
            progressCircleFill.style.strokeDashoffset = offset;
            progressPercentageText.textContent = `${Math.round(percent)}%`;
        }
        // Exemplo de uso (substitua pela sua lógica de progresso real)
        // setProgress(0); // Será atualizado pelo updateOverallProgress

        // --- JS para Alternar Tema (Modo Escuro) ---
        const themeToggleBtn = document.getElementById('theme-toggle');
        const themeToggleDarkIcon = document.getElementById('theme-toggle-dark-icon');
        const themeToggleLightIcon = document.getElementById('theme-toggle-light-icon');
        const themeToggleText = document.getElementById('theme-toggle-text'); // Span para o texto

        function applyTheme(isDark) {
            if (isDark) {
                document.documentElement.classList.add('dark');
                themeToggleDarkIcon.classList.remove('hidden');
                themeToggleLightIcon.classList.add('hidden');
                if(themeToggleText) themeToggleText.textContent = "Modo Claro";
                localStorage.setItem('theme', 'dark');
            } else {
                document.documentElement.classList.remove('dark');
                themeToggleDarkIcon.classList.add('hidden');
                themeToggleLightIcon.classList.remove('hidden');
                if(themeToggleText) themeToggleText.textContent = "Modo Escuro";
                localStorage.setItem('theme', 'light');
            }
        }

        const preferredTheme = localStorage.getItem('theme');
        const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

        if (preferredTheme === 'dark' || (!preferredTheme && systemPrefersDark)) {
            applyTheme(true);
        } else {
            applyTheme(false);
        }

        themeToggleBtn.addEventListener('click', function() {
            const isDarkMode = document.documentElement.classList.contains('dark');
            applyTheme(!isDarkMode);
            // Se o progresso já foi calculado, pode ser necessário re-aplicar classes de cor
            // que dependem do tema dinamicamente se não forem puramente CSS.
            // Neste caso, as cores do SVG são via text-color, então devem atualizar automaticamente.
        });
        
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            if (!localStorage.getItem('theme')) { // Só atualiza se não houver preferência explícita
                applyTheme(event.matches);
            }
        });

        // --- Adaptação para o Filtro de Abas (Sidebar) ---
        const filterTabsSidebar = document.querySelectorAll('.sidebar .filter-tab'); // Seleciona apenas os da sidebar
         filterTabsSidebar.forEach(tab => {
            tab.addEventListener("click", () => {
                filterTabsSidebar.forEach(t => {
                    t.classList.remove("bg-primary-DEFAULT", "text-primary-text", "dark:bg-primary-DEFAULT", "dark:text-primary-text", "font-medium");
                    t.classList.add("hover:bg-primary-light/30", "dark:hover:bg-primary-dark/30");
                });
                tab.classList.add("bg-primary-DEFAULT", "text-primary-text", "dark:bg-primary-DEFAULT", "dark:text-primary-text", "font-medium");
                tab.classList.remove("hover:bg-primary-light/30", "dark:hover:bg-primary-dark/30");
                // currentFilter = tab.dataset.filter; // Sua variável global currentFilter
                // filterAndRenderTopics(); // Sua função de filtro
            });
        });

    </script>
</body>
</html>
